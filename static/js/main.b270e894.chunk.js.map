{"version":3,"sources":["images/logo.svg","components/Header.js","components/Footer.js","images/delete-button.svg","images/like.svg","context/CurrentUserContext.js","components/Card.js","components/Main.js","components/ImagePopup.js","components/PopupWithForm.js","components/AddPlacePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","utils/api.js","components/Login.js","components/Register.js","components/InfoTooltip.js","utils/mestoAuth.js","components/ProtectedRoute.js","components/App.js","index.js"],"names":["Header","email","onSignOut","className","src","logo","alt","exact","path","type","onClick","to","Footer","Date","getFullYear","CurrentUserContext","React","createContext","Card","card","onCardClick","handleCardLike","handleCardDelete","user","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","_","link","name","deleteButton","likeButton","length","Main","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","cards","onCardLike","onCardDelete","initialCards","map","userInfo","avatar","id","about","ImagePopup","onClose","PopupWithForm","title","children","isOpened","buttonText","onSubmit","closeByEsc","e","key","react","useEffect","document","addEventListener","removeEventListener","AddPlacePopup","onAddCard","nameRef","useRef","linkRef","preventDefault","current","value","ref","placeholder","minLength","maxLength","required","EditProfilePopup","onUpdateUser","currentUser","useState","setName","description","setDescription","onChange","target","EditAvatarPopup","onUpdateAvatar","avatarRef","api","config","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_checkResponse","body","JSON","stringify","job","cardId","Login","onLogin","setEmail","password","setPassword","history","useHistory","resetForm","handleSubmit","a","push","Register","onRegister","InfoToolTip","isSuccseed","text","changeTipText","BASE_URL","chechResponse","ProtectedRoute","Component","component","rest","render","props","loggedIn","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","setLoggedIn","userData","setUserData","isInfoToolTipOpened","setIsInfoToolTipOpened","setSuccseed","token","localStorage","getItem","data","mestoAuth","catch","error","console","log","setCurrentUser","getUserInfo","setCards","selectedCard","setSelectedCard","getServerCards","closeAllPopups","Provider","removeItem","deleteCardRequest","state","filter","j","err","likeCard","newCard","c","setItem","finally","setUserInfo","setAvatar","avatarData","addNewCard","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b270e894.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import React from \"react\";\nimport { Route } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport logo from \"../images/logo.svg\";\n\nconst Header = ({ email, onSignOut }) => {\n  return (\n    <header className=\"header section\">\n      <img src={logo} alt=\"Место\" className=\"header__logo\" />\n      <Route exact path=\"/\">\n        <div className=\"header__info\">\n          <p className=\"header__email\">{email}</p>\n          <button\n            type=\"button\"\n            onClick={onSignOut}\n            className=\"header__sign-out\"\n          >\n            Выйти\n          </button>\n        </div>\n      </Route>\n      <Route exact path=\"/sign-in\">\n        <Link className=\"header__link\" to=\"sign-up\">\n          Регистрация\n        </Link>\n      </Route>\n      <Route exact path=\"/sign-up\">\n        <Link className=\"header__link\" to=\"sign-in\">\n          Войти\n        </Link>\n      </Route>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\n\nconst Footer = () => {\n  return (\n    <footer className=\"footer section\">\n      <p className=\"footer__copyright\">\n        &copy; {new Date().getFullYear()} Mesto Russia\n      </p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","export default __webpack_public_path__ + \"static/media/delete-button.a274c87c.svg\";","export default __webpack_public_path__ + \"static/media/like.87ed3714.svg\";","import React from \"react\";\n\nconst CurrentUserContext = React.createContext();\n\nexport default CurrentUserContext;\n","import React from \"react\";\nimport deleteButton from \"../images/delete-button.svg\";\nimport likeButton from \"../images/like.svg\";\nimport CurrentUserContext from \"../context/CurrentUserContext\";\n\nconst Card = ({ card, onCardClick, handleCardLike, handleCardDelete }) => {\n  const user = React.useContext(CurrentUserContext);\n\n  const isOwn = card.owner._id === user._id;\n  const cardDeleteButtonClassName = `card__delete-button ${\n    isOwn ? \"card__delete-button\" : \"card__delete-button_hiden\"\n  }`;\n\n  const isLiked = card.likes.some((i) => i._id === user._id);\n  const cardLikeButtonClassName = `card__like ${\n    isLiked ? \"card__like_active\" : \"card__like\"\n  }`;\n\n  return (\n    <div className=\"card\">\n      <div className=\"card__photo-container\">\n        <img\n          className=\"card__image\"\n          onClick={(_) => onCardClick(card)}\n          src={card.link}\n          alt={card.name}\n        />\n        <img\n          onClick={(_) => handleCardDelete(card)}\n          src={deleteButton}\n          alt=\"Кнопка удаления карточки\"\n          className={cardDeleteButtonClassName}\n        />\n      </div>\n      <div className=\"card__info\">\n        <h2 className=\"card__title\">{card.name}</h2>\n        <div className=\"card__like-place\">\n          <img\n            onClick={(_) => handleCardLike(card)}\n            src={likeButton}\n            alt=\"Кнопка лайка\"\n            className={cardLikeButtonClassName}\n          />\n          <p className=\"card__likes-counter\">{card.likes.length}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import Card from \"./Card\";\nimport React from \"react\";\nimport CurrentUserContext from \"../context/CurrentUserContext\";\n\nfunction Main({\n  handleEditAvatarClick,\n  handleEditProfileClick,\n  handleAddPlaceClick,\n  onCardClick,\n  cards,\n  onCardLike,\n  onCardDelete\n}) {\n  const initialCards = cards.map((card) => (\n    <Card\n      key={card._id}\n      card={card}\n      onCardClick={onCardClick}\n      handleCardDelete={onCardDelete}\n      handleCardLike={onCardLike}\n    />\n  ));\n\n  const userInfo = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile section\">\n        <div className=\"profile__avatar-place\">\n          <img\n            src={userInfo.avatar}\n            alt=\"Фото пользователя\"\n            className=\"profile__avatar\"\n          />\n          <button\n            type=\"button\"\n            onClick={handleEditAvatarClick}\n            className=\"profile__avatar-button\"\n            id=\"avatar-button\"\n            aria-label=\"Загрузить контент\"\n          ></button>\n        </div>\n        <div className=\"profile__info\">\n          <div className=\"profile__name-container\">\n            <h1 className=\"profile__name\">{userInfo.name}</h1>\n            <button\n              type=\"button\"\n              onClick={handleEditProfileClick}\n              className=\"profile__edit-button\"\n              aria-label=\"Редактировать профиль\"\n            ></button>\n          </div>\n          <p className=\"profile__job\">{userInfo.about}</p>\n        </div>\n        <button\n          type=\"button\"\n          onClick={handleAddPlaceClick}\n          className=\"profile__add-button\"\n          aria-label=\"Загрузить контент\"\n        ></button>\n      </section>\n      <section className=\"elements section\">{initialCards}</section>\n    </main>\n  );\n}\n\nexport default Main;\n","function ImagePopup({ card, onClose }) {\n  return (\n    <section className={`popup popup_type_image ${card && \"popup_opened\"}`}>\n      <div className=\"popup__container popup__container_filling_image\">\n        <button\n          onClick={onClose}\n          type=\"button\"\n          className=\"popup__close-button\"\n        ></button>\n        <img\n          alt={card ? card.name : \"\"}\n          src={card ? card.link : \"\"}\n          className=\"popup__image\"\n        />\n        <h2 className=\"popup__title popup__title_position_card\">\n          {card ? card.name : \"\"}\n        </h2>\n      </div>\n    </section>\n  );\n}\n\nexport default ImagePopup;\n","import react from \"react\";\n\nconst PopupWithForm = ({\n  id,\n  title,\n  children,\n  isOpened,\n  onClose,\n  buttonText,\n  onSubmit,\n}) => {\n  const closeByEsc = (e) => {\n    if (e.key === \"Escape\") {\n      onClose && onClose();\n    }\n  };\n  react.useEffect(() => {\n     document.addEventListener(\"keyup\", closeByEsc);\n\n    return () => {\n      document.removeEventListener(\"keyup\", closeByEsc);\n    };\n  }, [isOpened, onClose]);\n\n  return (\n    <section className={isOpened ? `popup_opened popup` : `popup`} id={id}>\n      <div className={`popup__container popup__container_filling_${id}`}>\n        <button\n          onClick={onClose}\n          type=\"button\"\n          className=\"popup__close-button\"\n          aria-label=\"Закрыть попап\"\n        ></button>\n        <h2 className=\"popup__title popup__title_position_form\">{title}</h2>\n        <form\n          className=\"popup__form\"\n          name={`form-${id}`}\n          id={`form-edit-${id}`}\n          onSubmit={onSubmit}\n        >\n          {children}\n          <button type=\"submit\" className=\"popup__save-button\">\n            {buttonText}\n          </button>\n        </form>\n      </div>\n    </section>\n  );\n};\n\nexport default PopupWithForm;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nfunction AddPlacePopup({ isOpened, onClose, onAddCard }) {\n   const nameRef = React.useRef(); // записываем объект, возвращаемый хуком, в переменную\n   const linkRef = React.useRef(); // записываем объект, возвращаемый хуком, в переменную\n\n   function handleSubmit(e) {\n      e.preventDefault();\n      onAddCard({\n        name: nameRef.current.value,\n        link: linkRef.current.value,\n      });\n    } \n\n\n\n   return(\n     <PopupWithForm\n       id={\"form\"}\n       title={\"Новое место\"}\n       buttonText={\"Создать\"}\n       onClose={onClose}\n       isOpened={isOpened}\n       onSubmit={handleSubmit}\n     >\n       <input\n         className=\"popup__input\"\n         ref={nameRef}\n         placeholder=\"Название\"\n         type=\"text\"\n         name=\"title\"\n         id=\"title\"\n         minLength=\"2\"\n         maxLength=\"30\"\n         required\n       />\n       <span className=\"title-error\"></span>\n       <input\n         className=\"popup__input\"\n         ref={linkRef}\n         placeholder=\"Ссылка на картинку\"\n         type=\"url\"\n         name=\"link\"\n         id=\"link\"\n         required\n       />\n       <span className=\"link-error\"></span>\n     </PopupWithForm>\n   );\n }\n \n export default AddPlacePopup;\n ","import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport CurrentUserContext from \"../context/CurrentUserContext\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nconst EditProfilePopup = ({ isOpened, onClose, onUpdateUser }) =>{\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n\n  const handleChangeName = (e) => {\n    setName(e.target.value);\n  };\n  const handleChangeDescription = (e) => {\n    setDescription(e.target.value);\n  };\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, isOpened]);\n    \n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpdateUser({\n      name: name,\n      about: description,\n    });\n}\n\n  return (\n    <PopupWithForm\n      id={\"form\"}\n      title={\"Редактировать профиль\"}\n      buttonText={\"Сохранить\"}\n      onClose={onClose}\n      isOpened={isOpened}\n      onSubmit={handleSubmit}\n    >\n      <input\n        className=\"popup__input\"\n        value={name || ''}\n        type=\"text\"\n        name=\"name\"\n        id=\"name\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        required\n        onChange={handleChangeName}\n      />\n      <span className=\"name-error\" id=\"name-error\"></span>\n      <input\n        className=\"popup__input\"\n        value={description || ''}\n        type=\"text\"\n        name=\"job\"\n        id=\"job\"\n        minLength=\"2\"\n        maxLength=\"400\"\n        required\n        onChange={handleChangeDescription}\n\n      />\n      <span className=\"job-error\" id=\"job-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\nconst EditAvatarPopup = ({ isOpened, onClose, onUpdateAvatar }) => {\n  const avatarRef = React.useRef(); // записываем объект, возвращаемый хуком, в переменную\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  };\n\n  return (\n    <PopupWithForm\n      id={\"avatar\"}\n      title={\"Обновить аватар\"}\n      buttonText={\"Сохранить\"}\n      isOpened={isOpened}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        ref={avatarRef}\n        className=\"popup__input\"\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        name=\"avatar\"\n        id=\"avatar\"\n        minLength=\"2\"\n        required\n      />\n      <span className=\"job-error\" id=\"job-error\"></span>\n    </PopupWithForm>\n  );\n};\n\nexport default EditAvatarPopup;\n","//блок catch должен быть не в апи, а в индексе при вызове метода. \nclass Api {\n    constructor(config) {\n        this._url = config.url;\n        this._headers = config.headers;\n    }\n\n    _checkResponse(res) {\n        if (res.ok) {\n            return res.json();\n        }\n        return Promise.reject(`Ошибка ${res.status}`);\n    }\n\n    // загружаем карточки с сервера\n    getServerCards() {\n        return fetch(`${this._url}/cards`, {\n                method: \"GET\",\n                headers: this._headers,\n            })\n            .then(this._checkResponse);\n    }\n\n    //подгружаем данные пользователя с сервера\n    getUserInfo() {\n        return fetch(`${this._url}/users/me`, {\n                method: 'GET',\n                headers: this._headers,\n            })\n            .then(this._checkResponse);\n    }\n\n   \n    //добавляем новую карточку\n    addNewCard(name, link) { \n        return fetch(`${this._url}/cards`, {\n                method: \"POST\",\n                headers: this._headers,\n                body: JSON.stringify({\n                    name: name,\n                    link: link\n                })\n            })\n            .then(this._checkResponse);\n    }\n\n     //обновляем данные пользователя на серваке\n     setUserInfo(name, job) {\n        return fetch(`${this._url}/users/me`, {\n                method: 'PATCH',\n                headers: this._headers,\n                body: JSON.stringify({\n                    name: name,\n                    about: job\n                })\n            })\n            .then(this._checkResponse);\n    }\n\n\n //обновляем аватар пользователя\n    setAvatar(avatar) {\n        return fetch(`${this._url}/users/me/avatar`, {\n                method: 'PATCH',\n                headers: this._headers,\n                body: JSON.stringify({\n                    avatar: avatar\n                })\n            })\n            .then(this._checkResponse);\n    }\n\n    //лайкаем карточку\n    likeCard(cardId, isLiked) {\n        return fetch(`${this._url}/cards/likes/${cardId}`, {\n                method: isLiked ? \"DELETE\" : \"PUT\",\n                headers: this._headers,\n            })\n            .then(this._checkResponse);\n    }\n\n    //удаляем карточку\n    deleteCardRequest(cardId) {\n        return fetch(`${this._url}/cards/${cardId}`, {\n                method: \"DELETE\",\n                headers: this._headers,\n            })\n            .then(this._checkResponse);\n    }\n}\n\n\n//создаем экземпляр класса\n\nconst api = new Api({\n\turl: \"https://mesto.nomoreparties.co/v1/cohort-26\",\n\theaders: {\n\t\t\"content-type\": \"application/json\",\n\t\t\"authorization\": \"b22e628d-a32e-4f98-97fa-aa25d8506b10\",\n\t},\n});\n\nexport default api;\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Login = ({ onLogin }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const history = useHistory();\n\n  const resetForm = () => {\n    setEmail(\"\");\n    setPassword(\"\");\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!email || !password) {\n      return;\n    }\n    onLogin({ email, password })\n      .then(resetForm)\n      .then(() => history.push(\"/\"));\n  };\n\n  return (\n    <div className=\"login__container\">\n      <h2 className=\"login__title\">Вход</h2>\n      <form onSubmit={handleSubmit} className=\"login__form\">\n        <input\n          id=\"email\"\n          className=\"login__input\"\n          placeholder=\"Email\"\n          name=\"email\"\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          id=\"password\"\n          className=\"login__input\"\n          name=\"password\"\n          placeholder=\"Пароль\"\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button type=\"submit\" className=\"login__button\">\n          Войти\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst Register = ({ onRegister }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const history = useHistory();\n\n  const resetForm = () => {\n    setEmail(\"\");\n    setPassword(\"\");\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    onRegister({ email, password })\n      .then(resetForm)\n      .then(() => history.push(\"/sign-in\"));\n  };\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const handlePaswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  return (\n    <section className=\"register__container\">\n      <h2 className=\"register__title\">Регистрация</h2>\n      <form onSubmit={handleSubmit} className=\"register__form\">\n        <input\n          id=\"email\"\n          className=\"register__input\"\n          placeholder=\"Email\"\n          name=\"email\"\n          type=\"email\"\n          value={email}\n          onChange={handleEmailChange}\n        />\n        <input\n          id=\"password\"\n          className=\"register__input\"\n          name=\"password\"\n          placeholder=\"Пароль\"\n          type=\"password\"\n          value={password}\n          onChange={handlePaswordChange}\n        />\n        <button type=\"submit\" className=\"register__button\">\n          Зарегистрироваться\n        </button>\n      </form>\n      <div className=\"register__signin\">\n        <p className=\"register__login-link\"> Уже зарегистрированы?</p>\n        <Link to=\"sign-in\" className=\"register__login-link\">\n          Войти\n        </Link>\n      </div>\n    </section>\n  );\n};\n\nexport default Register;\n","import react from \"react\";\n\nfunction InfoToolTip({ id, isOpened, onClose, isSuccseed }) {\n  function closeByEsc(e) {\n    if (e.key === \"Escape\") {\n      onClose && onClose();\n    }\n  }\n\n  react.useEffect(() => {\n    document.addEventListener(\"keyup\", closeByEsc);\n\n    return () => {\n      document.removeEventListener(\"keyup\", closeByEsc);\n    };\n  }, [isOpened, onClose]);\n\n  function changeTipText() {\n    let text;\n    if (isSuccseed === true) {\n      text = \"Вы успешно зарегистрировались\";\n    }\n    if (isSuccseed === false) {\n      text = \"Что-то пошло не так. Попробуйте еще раз\";\n    }\n    return text;\n  }\n\n  return (\n    <div className={isOpened ? `popup_opened popup` : `popup`} id={id}>\n      <div className={`popup__container popup__container_filling_${id}`}>\n        <button\n          onClick={onClose}\n          type=\"button\"\n          className=\"popup__close-button\"\n          aria-label=\"Закрыть попап\"\n        ></button>\n        <div\n          className={\n            isSuccseed ? `popup__reg-image-ok` : `popup__reg-image-error`\n          }\n        ></div>\n        <h3 className=\"popup__title popup__title_position_tips\">\n          {changeTipText()}\n        </h3>\n      </div>\n    </div>\n  );\n}\n\nexport default InfoToolTip;\n","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nconst chechResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка ${res.status}`);\n}\n\nexport const register = ( email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ email, password})\n  })\n  .then((res) => { \n    return res;\n  })\n  .then(chechResponse);\n};\n\n\nexport const authorize = ( email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ email, password })\n  })\n  .then(chechResponse);\n};\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    }\n  })\n  .then(data => data)\n  .then(chechResponse);\n}\n\n\n","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...rest  }) => {\n  return (\n    <Route {...rest} render={props => rest.loggedIn === true ? <Component {...props} {...rest} /> : <Redirect to=\"./sign-in\" />} />\n)}\n\nexport default ProtectedRoute;","import { useEffect, useState } from \"react\";\nimport React from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Main from \"./Main\";\nimport ImagePopup from \"./ImagePopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport api from \"../utils/api\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport InfoToolTip from \"./InfoTooltip\";\nimport * as mestoAuth from \"../utils/mestoAuth\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport { Route, Switch, useHistory } from \"react-router-dom\";\n\nimport CurrentUserContext from \"../context/CurrentUserContext\";\n\nconst App =() => {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userData, setUserData] = useState(\"\");\n\n  const [isInfoToolTipOpened, setIsInfoToolTipOpened] = useState(false);\n  const [isSuccseed, setSuccseed] = useState(true);\n\n  const history = useHistory();\n\n  const onRegister = ({ email, password }) => {\n    console.log(email);\n    return mestoAuth\n      .register(email, password)\n      .then(() => {\n        setSuccseed(true);\n      })\n      .catch(() => {\n        setSuccseed(false);\n      })\n      .finally(setIsInfoToolTipOpened(true));\n  };\n\n  const onLogin = ({ email, password }) => {\n    return mestoAuth\n      .authorize(email, password)\n      .then((data) => {\n        localStorage.setItem(\"token\", data.token);\n        setLoggedIn(true);\n        setUserData(email);\n        history.push(\"/\");\n      })\n      .catch(() => {\n        setSuccseed(false);\n        setIsInfoToolTipOpened(true);\n        setLoggedIn(false);\n      });\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      mestoAuth\n        .getContent(token)\n        .then((data) => {\n          if (data) {\n            setLoggedIn(true);\n            setUserData(data.data.email);\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  }, []);\n\n  useEffect(() => {\n    if (loggedIn) history.push(\"/\");\n  }, [history, loggedIn]);\n\n  const onSignOut = () => {\n    localStorage.removeItem(\"token\");\n    history.push(\"/sign-in\");\n  }\n\n  //изменение стейта при открытии попапап\n  const onEditProfile = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n  const onEditAvatar = () => {\n    setEditAvatarPopupOpen(true);\n  };\n  const onAddPlace = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n  const onCardClick = (cards) => setSelectedCard(cards);\n\n  const [currentUser, setCurrentUser] = useState({});\n\n  useEffect(() => {\n    api\n      .getUserInfo()\n      .then((currentUser) => {\n        setCurrentUser(currentUser);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  const handleUpdateUser = ({ name, about }) => {\n    api\n      .setUserInfo(name, about)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const handleUpdateAvatar = ({ avatar }) => {\n    api\n      .setAvatar(avatar)\n      .then((avatarData) => {\n        setCurrentUser(avatarData);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const handleAddCard = ({ name, link }) => {\n    api\n      .addNewCard(name, link)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n\n  useEffect(() => {\n    api\n      .getServerCards()\n      .then((cards) => {\n        setCards(cards);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api\n      .likeCard(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleCardDelete = (card) => {\n    api\n      .deleteCardRequest(card._id)\n      .then((data) => {\n        setCards((state) => state.filter((j) => j._id !== card._id && data));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const closeAllPopups = () => {\n    setIsEditProfilePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoToolTipOpened(false);\n    setSelectedCard(null);\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"root\">\n        <Header email={userData} onSignOut={onSignOut} />\n        <Switch>\n          <ProtectedRoute\n            exact\n            path=\"/\"\n            loggedIn={loggedIn}\n            cards={cards}\n            userInfo={currentUser}\n            onCardDelete={handleCardDelete}\n            onCardLike={handleCardLike}\n            onCardClick={onCardClick}\n            handleEditAvatarClick={onEditAvatar}\n            handleEditProfileClick={onEditProfile}\n            handleAddPlaceClick={onAddPlace}\n            component={Main}\n          ></ProtectedRoute>\n\n          <Route path=\"/sign-in\">\n            <Login onLogin={onLogin} />\n          </Route>\n\n          <Route path=\"/sign-up\">\n            <Register onRegister={onRegister} />\n          </Route>\n        </Switch>\n\n        <Footer />\n\n        <InfoToolTip\n          id=\"reg-pic\"\n          isOpened={isInfoToolTipOpened}\n          onClose={closeAllPopups}\n          isSuccseed={isSuccseed}\n        />\n\n        <ImagePopup id={\"image\"} card={selectedCard} onClose={closeAllPopups} />\n\n        <EditProfilePopup\n          isOpened={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <EditAvatarPopup\n          isOpened={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        <AddPlacePopup\n          isOpened={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddCard={handleAddCard}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n    <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}